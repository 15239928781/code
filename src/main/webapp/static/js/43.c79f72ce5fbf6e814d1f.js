webpackJsonp([43],{"3ytd":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("zfN/"),s=a("yKRS"),r=a("gwNS"),o=a("Au9i"),n={data:function(){return{havepage:!0,itemPay:[],waitpay:!1,waitreceive:!1,orderdown:!1}},components:{Nopage:i.a,Ordertab:s.a},created:function(){this.getOrder()},computed:{getFirst:function(){return function(t){var e=[];return e.push(t[0]),e}}},methods:{getOrder:function(){var t=this;r.a.getOrderByUser({oState:0}).then(function(e){if(t.itemPay=e.data,0==e.data.length)return t.havepage=!1,!1;for(var a=0;a<e.data.length;a++)switch(e.data[a].oState){case 1:t.itemPay[a].oState="待付款",t.itemPay[a].waitpay=!0,t.itemPay[a].waitreceive=!1,t.itemPay[a].orderdown=!1;break;case 2:t.itemPay[a].oState="买家已付款";break;case 3:t.itemPay[a].oState="卖家已发货",t.itemPay[a].waitpay=!1,t.itemPay[a].waitreceive=!0,t.itemPay[a].orderdown=!1;break;case 4:t.itemPay[a].oState="已完成",t.itemPay[a].waitpay=!1,t.itemPay[a].waitreceive=!1,t.itemPay[a].orderdown=!0;break;case 5:t.itemPay[a].oState="订单已取消",t.itemPay[a].waitpay=!1,t.itemPay[a].waitreceive=!1,t.itemPay[a].orderdown=!0}})},more:function(t,e,a){},cancle:function(t,e,a){var i=this.$qs.stringify({oId:a.oId,oState:5});r.a.updateOrderStatus(i).then(function(a){Object(o.Toast)("取消成功"),t.splice(e,1)})},goBuy:function(t){},confirm:function(t,e,a){var i=this.$qs.stringify({oId:a.oId,oState:4});r.a.updateOrderStatus(i).then(function(a){Object(o.Toast)("订单已完成"),t.splice(e,1)})},deleteOrder:function(t,e,a){var i=this;o.MessageBox.confirm("确定删除订单?","提示").then(function(){var s=i.$qs.stringify({oId:a.oId});r.a.delOrder(s).then(function(a){Object(o.Toast)({message:a.data.msg}),t.splice(e,1)})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("mt-header",{staticClass:"header",attrs:{fixed:"",title:"订单中心"}},[a("router-link",{attrs:{slot:"left",to:"/member"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}})],1)],1),t._v(" "),a("div",{staticClass:"order"},[a("ordertab",{attrs:{urlRouter:t.$route.path}}),t._v(" "),a("div",{staticClass:"container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.havepage,expression:"!havepage"}]},[a("nopage")],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.havepage,expression:"havepage"}],staticClass:"order-item"},t._l(t.itemPay,function(e,i){return a("div",{key:i,staticClass:"order-list"},[t.itemPay.length>=1&&e.list?a("div",[a("div",{staticClass:"order-top flex-between"},[a("p",[t._v("订单号"+t._s(e.oId))]),t._v(" "),a("p",{staticClass:"goods-state"},[t._v(t._s(e.oState))])]),t._v(" "),a("div",{staticClass:"order-content"},t._l(t.getFirst(e.list),function(e,i){return a("div",{key:i},[a("router-link",{staticClass:"flex",attrs:{to:{path:"/detail/"+e.pId}}},[a("div",{staticClass:"order-img"},[a("img",{attrs:{src:e.pImage}})]),t._v(" "),a("div",{staticClass:"order-text "},[a("p",{staticClass:"goods-name text-ellipsis"},[t._v(t._s(e.pName))]),t._v(" "),a("div",{staticClass:"goods-num"},[a("p",{staticClass:"goods-price"},[t._v("¥"+t._s(e.pPrice))]),t._v(" "),a("p",[t._v("x"+t._s(e.oiCount))])])])])],1)}),0),t._v(" "),a("div",{staticClass:"order-bottom"},[a("div",{staticClass:"order-list"},[a("p",[a("span",{staticClass:"count"},[t._v("共"+t._s(e.list.length)+"件商品")]),t._v(" "),a("span",[t._v("合计¥"+t._s(e.total))])])]),t._v(" "),a("div",{staticClass:"order-btn"},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.list.length>1,expression:"item.list.length>1"}],staticClass:"more",on:{click:function(a){return t.more(t.itemPay,i,e)}}},[t._v("更多")]),t._v(" "),a("p",{staticClass:"tag"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.waitpay,expression:"item.waitpay"}],on:{click:function(a){return t.cancle(t.itemPay,i,e)}}},[t._v("取消订单")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.waitpay,expression:"item.waitpay"}],on:{click:function(a){return t.goBuy(t.itemPay,i,e)}}},[t._v("去付款")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.waitreceive,expression:"item.waitreceive"}],on:{click:function(a){return t.confirm(t.itemPay,i,e)}}},[t._v("确认收货")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.orderdown,expression:"item.orderdown"}],on:{click:function(a){return t.deleteOrder(t.itemPay,i,e)}}},[t._v("删除订单")])])])])]):t._e()])}),0)])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(t){a("W7gX")},"data-v-1abdd69a",null);e.default=d.exports},W7gX:function(t,e){}});