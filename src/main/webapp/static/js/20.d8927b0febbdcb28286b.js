webpackJsonp([20],{CNMT:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("gwNS"),s=(e("Au9i"),{data:function(){return{orderPay:this.$route.params.prices,oNum:this.$route.params.ordernum,way:this.$route.params.way,code:"",appId:"",timeStamp:"",nonceStr:"",package:"",signType:"",paySign:"",uid:localStorage.getItem("uId"),status:0}},created:function(){var t=window.location.href.split("=")[1].split("&")[0];this.code=t},methods:{payNow:function(){1==this.$route.params.status?this.status=1:this.status=0;var t=this.$qs.stringify({code:this.code,prices:Number(100*this.$route.params.prices),ordernum:this.$route.params.ordernum,status:this.status});r.a.payorders(t).then(function(t){"undefined"==typeof WeixinJSBridge?alert("请在微信内支付"):WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data.data.appId,timeStamp:t.data.data.timeStamp,nonceStr:t.data.data.nonceStr,package:t.data.data.package,signType:t.data.data.signType,paySign:t.data.data.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location.href="http://www.bybart.cn/ssm/index.html#/order":"get_brand_wcpay_request:cancel"==t.err_msg?(alert("支付取消"),window.location.href="http://www.bybart.cn/ssm/index.html#/waitpay"):"get_brand_wcpay_request:fail"==t.err_msg&&(alert("支付失败"),WeixinJSBridge.call("closeWindow"))})})},updataStatus:function(){var t=this,a=this.$qs.stringify({oOrdernum:this.oNum,oState:2});r.a.updateOrderStatus(a).then(function(a){if(console.log(a),1==t.way)window.location.href="http://www.bybart.cn/ssm/index.html";else if(2==t.way){var e=JSON.parse(localStorage.getItem("groupDetail"));if(console.log("groupDetail",e),"groupId"==document.cookie.split("=")[0]){var s=document.cookie.split("=")[1],i=t.$qs.stringify({tId:s,aValidity:localStorage.getItem("number"),uId:localStorage.getItem("uId"),orderNum:t.$route.params.ordernum,bId:e.pId});r.a.joinBill(i).then(function(a){localStorage.setItem("groupId",a.data.Id),t.$router.push("/groupOrder/"+a.data.Id)})}else{var o=t.$qs.stringify({bId:e.id,pId:e.pId,pName:e.pName,aValidity:localStorage.getItem("number"),uId:localStorage.getItem("uId"),orderNum:t.$route.params.ordernum});r.a.addBill(o).then(function(a){localStorage.setItem("groupId",a.data.Id),t.$router.push("/groupOrder/"+a.data.Id)})}}})}}}),i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wrapper"},[e("mt-header",{staticClass:"header",attrs:{fixed:"",title:"微信支付"}},[e("a",{attrs:{slot:"left",href:"javascript:history.go(-1);"},slot:"left"},[e("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),e("div",{staticClass:"pay flex-align-center flex-center"},[e("div",{staticClass:"pay-box"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},[e("p",{staticClass:"payMoney"},[t._v("￥"+t._s(t.orderPay))]),t._v(" "),e("mt-button",{staticClass:"confirmBtn",on:{click:t.payNow}},[t._v("确认支付")])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"topHeader"},[a("i",{staticClass:"icon icon-close"}),this._v(" "),a("p",{staticClass:"payNow"},[this._v("支付")])])}]};var o=e("VU/8")(s,i,!1,function(t){e("aQHt")},"data-v-c91b1d04",null);a.default=o.exports},aQHt:function(t,a){}});