webpackJsonp([22],{"+B31":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("gwNS"),i=e("Au9i"),n=(localStorage.getItem("uId"),{data:function(){return{payment:"微信支付",pay_channel:"2",popupVisible:!1,account:"",haveAddress:!0,noAddress:!1,address:{},orderList:[]}},created:function(){var t=this,s=JSON.parse(localStorage.getItem("address"));s?this.address=s:a.a.getDefaultAddress({uId:localStorage.getItem("uId")}).then(function(s){0==s.data.length?(t.noAddress=!0,t.haveAddress=!1,Object(i.Toast)("您还没有默认地址，快去添加吧")):t.address=s.data[0]}),a.a.getOrederByOid({oId:this.$route.params.oId}).then(function(s){t.orderList=s.data.list;var e=t;e.account=0,e.orderList.forEach(function(t){e.account+=t.oiCount*t.pPrice})})},methods:{addressDetail:function(){console.log(adDetail.aId)},wx:function(){this.payment="微信支付",this.pay_channel="2",this.popupVisible=!1},alipay:function(){this.payment="支付宝支付",this.pay_channel="1",this.popupVisible=!1},cash:function(){this.payment="货到付款",this.pay_channel="3",this.popupVisible=!1},popup:function(){this.popupVisible=!0},gotoPay:function(){var t=this;if(this.address.aId)if(""==this.pay_channel)Object(i.Toast)("请选择支付方式");else{var s=this.$qs.stringify({oId:this.$route.params.oId,aId:this.address.aId,pway:this.pay_channel});a.a.addOrderAddress(s).then(function(s){console.log(s.data.data.odrnum),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7500e60816b113c8&redirect_uri=http%3a%2f%2fwww.bybart.cn%2fssm%2findex.html%23%2fpay%2f"+t.account+"%2f"+s.data.data.odrnum+"%2f"+t.$route.params.way+"&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect"})}else Object(i.Toast)("请添加地址")}}}),o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("mt-header",{staticClass:"header",attrs:{fixed:"",title:"确认订单"}},[e("a",{attrs:{slot:"left",href:"javascript:history.go(-1);"},slot:"left"},[e("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),e("div",{staticClass:"buyNow container"},[e("router-link",{attrs:{to:"/detailAddress"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.haveAddress,expression:"haveAddress"}],staticClass:"address flex-between flex-align-center",attrs:{id:t.address.aId}},[e("p",{staticClass:"receiver_name"},[t._v(t._s(t.address.aName))]),t._v(" "),e("div",{staticClass:"address-detail"},[e("p",[t._v(t._s(t.address.aTel))]),t._v(" "),e("p",{staticClass:"text-ellipsis"},[t._v(t._s(t.address.aProvice)+t._s(t.address.aCity)+t._s(t.address.aArea)+t._s(t.address.aAddress))])]),t._v(" "),e("i",{staticClass:"icon icon-go"})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.noAddress,expression:"noAddress"}],staticClass:"address flex-between flex-align-center"},[e("div",[t._v("\n          添加默认地址\n        ")]),t._v(" "),e("i",{staticClass:"icon icon-go"})])]),t._v(" "),t._l(t.orderList,function(s,a){return e("div",{key:a,staticClass:"gift-detail flex-align-center"},[e("div",{staticClass:"image"},[e("img",{attrs:{src:s.pImage,alt:""}})]),t._v(" "),e("div",{staticClass:"gift-desc"},[e("p",{staticClass:"title text-ellipsis"},[t._v(t._s(s.pName))]),t._v(" "),e("span",[t._v(t._s(s.desc))]),t._v(" "),e("div",{staticClass:"flex-align-center flex-between"},[e("p",[t._v("×"+t._s(s.oiCount))]),t._v(" "),e("p",{staticClass:"price"},[t._v("￥"+t._s(s.pPrice))])])])])}),t._v(" "),e("div",{staticClass:"gift-list flex"},[e("p",[t._v("支付方式")]),t._v(" "),e("div",{staticClass:"item-input flex-between flex-align-center"},[e("input",{attrs:{type:"text",id:t.pay_channel,readonly:"",onfocus:"this.blur()"},domProps:{value:t.payment}}),t._v(" "),e("i",{staticClass:"icon icon-go"})])])],2),t._v(" "),e("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(s){t.popupVisible=s},expression:"popupVisible"}},[e("div",{staticClass:"payment"},[e("ul",[e("li",{on:{click:t.wx}},[e("i",{staticClass:"icon icon-wx"}),t._v(" 微信支付")])])])]),t._v(" "),e("footer",[e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-price"},[e("p",[t._v("应支付：")]),t._v(" "),e("p",[t._v(t._s(t.account)+"元")])]),t._v(" "),e("div",{staticClass:"button",on:{click:t.gotoPay}},[t._v("去支付")])])])],1)},staticRenderFns:[]};var d=e("VU/8")(n,o,!1,function(t){e("GHUF")},"data-v-9ba8a184",null);s.default=d.exports},GHUF:function(t,s){}});