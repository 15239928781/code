webpackJsonp([41],{NxCG:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("zfN/"),i=s("yKRS"),o=s("gwNS"),r=s("Au9i"),n={data:function(){return{selected:this.$route.params.id,isOrder:!1,havepage:!0,itemPay:[],userComment:"",popupVisible:!1,goods:{}}},components:{Nopage:a.a,Ordertab:i.a},created:function(){this.getOrder()},computed:{getFirst:function(){return function(t){var e=[];return e.push(t[0]),e}}},methods:{getOrder:function(){var t=this;o.a.getOrderByUser({oState:4}).then(function(e){if(0==e.data.length)return t.havepage=!1,!1;t.itemPay=e.data})},more:function(t,e,s){},deleteOrder:function(t,e,s){var a=this;r.MessageBox.confirm("确定删除订单?","提示").then(function(){var i=a.$qs.stringify({oId:s.oId});o.a.delOrder(i).then(function(s){Object(r.Toast)({message:s.data.msg}),t.splice(e,1)})})},addcomment:function(t){this.popupVisible=!0,this.goods=t},submit:function(){var t=this;if(""==this.userComment)Object(r.Toast)("评论不能为空");else{var e=this.$qs.stringify({uId:localStorage.getItem("uId"),context:this.userComment,pId:this.goods.pId});o.a.addcomment(e).then(function(e){Object(r.Toast)({message:e.data.msg}),t.popupVisible=!1,t.userComment=""})}}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("mt-header",{staticClass:"header",attrs:{fixed:"",title:"订单中心"}},[s("router-link",{attrs:{slot:"left",to:"/member"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)],1),t._v(" "),s("div",{staticClass:"order"},[s("ordertab",{attrs:{urlRouter:t.$route.path}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.havepage,expression:"!havepage"}]},[s("nopage",{attrs:{describe:"购物车空空的~快去添加吧"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.havepage,expression:"havepage"}],staticClass:"order-item"},[t._l(t.itemPay,function(e,a){return e.list?s("div",{key:a,staticClass:"order-list"},[s("div",{staticClass:"order-top flex-between"},[s("p",[t._v("订单号"+t._s(e.oId))]),t._v(" "),s("p",{staticClass:"goods-state"},[t._v("已完成")])]),t._v(" "),s("div",{staticClass:"order-content"},t._l(t.getFirst(e.list),function(e,a){return s("div",{key:a},[s("router-link",{staticClass:"flex",attrs:{to:{path:"/detail/"+e.pId}}},[s("div",{staticClass:"order-img"},[s("img",{attrs:{src:e.pImage}}),t._v(" "),s("div",{staticClass:"comment-form"},[s("p",{staticClass:"commentTag",on:{click:function(s){return t.addcomment(e)}}},[s("span",[t._v("评价")])])])]),t._v(" "),s("div",{staticClass:"order-text "},[s("p",{staticClass:"goods-name text-ellipsis"},[t._v(t._s(e.pName))]),t._v(" "),s("div",{staticClass:"goods-num"},[s("p",{staticClass:"goods-price"},[t._v("¥"+t._s(e.pPrice))]),t._v(" "),s("p",[t._v("x"+t._s(e.oiCount))])])])])],1)}),0),t._v(" "),s("div",{staticClass:"order-bottom"},[s("div",{staticClass:"order-list"},[s("p",[s("span",{staticClass:"count"},[t._v("共"+t._s(e.list.length)+"件商品")]),t._v(" "),s("span",[t._v("合计¥"+t._s(e.total))])])]),t._v(" "),s("div",{staticClass:"order-btn"},[s("p",{directives:[{name:"show",rawName:"v-show",value:e.list.length>1,expression:"item.list.length>1"}],staticClass:"more",on:{click:function(s){return t.more(t.itemPay,a,e)}}},[t._v("更多")]),t._v(" "),s("p",{staticClass:"tag"},[s("span",{on:{click:function(s){return t.deleteOrder(t.itemPay,a,e)}}},[t._v("删除订单")])])])])]):t._e()}),t._v(" "),s("mt-popup",{staticClass:"popup",attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("mt-field",{staticClass:"comment-input",attrs:{placeholder:"评论"},model:{value:t.userComment,callback:function(e){t.userComment=e},expression:"userComment"}}),t._v(" "),s("mt-button",{attrs:{size:"normal",plain:""},on:{click:function(e){t.popupVisible=!1}}},[t._v("取消")]),t._v(" "),s("mt-button",{attrs:{size:"normal",plain:"",type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)],2)])],1)],1)},staticRenderFns:[]};var l=s("VU/8")(n,c,!1,function(t){s("vJgX")},"data-v-394b2b15",null);e.default=l.exports},vJgX:function(t,e){}});