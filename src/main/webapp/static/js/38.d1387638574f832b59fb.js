webpackJsonp([38],{YbCF:function(t,e){},tRu6:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("gwNS"),i=s("Au9i"),r=(localStorage.getItem("uId"),{data:function(){return{payment:"微信支付",pay_channel:"2",popupVisible:!1,account:sessionStorage.getItem("allCoach"),haveAddress:!0,noAddress:!1,address:{},orderList:[]}},created:function(){var t=this;a.a.getDefaultAddress({uId:localStorage.getItem("uId")}).then(function(e){0==e.data.length?(t.noAddress=!0,t.haveAddress=!1,Object(i.Toast)("您还没有默认地址，快去添加吧")):t.address=e.data[0]}),this.orderList=JSON.parse(sessionStorage.getItem("orderSelect"))},methods:{addressDetail:function(){console.log(adDetail.aId)},wx:function(){this.payment="微信支付",this.pay_channel="2",this.popupVisible=!1},alipay:function(){this.payment="支付宝支付",this.pay_channel="1",this.popupVisible=!1},cash:function(){this.payment="货到付款",this.pay_channel="3",this.popupVisible=!1},popup:function(){this.popupVisible=!0},orderByCart:function(){var t=this,e=this.$qs.stringify({uId:localStorage.getItem("uId"),cidlist:sessionStorage.getItem("orderArr")});a.a.addOrderByCart(e).then(function(e){console.log(e.data.data.orderid);var s=t.$qs.stringify({oId:e.data.data.orderid,aId:t.address.aId,pway:t.pay_channel});a.a.addOrderAddress(s).then(function(e){console.log(e.data.data.odrnum),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7500e60816b113c8&redirect_uri=http%3a%2f%2fwww.bybart.cn%2fssm%2findex.html%23%2fpay%2f"+t.account+"%2f"+e.data.data.odrnum+"%2f"+t.$route.params.way+"&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect"})})},gotoPay:function(){this.address.aId?""==this.pay_channel?Object(i.Toast)("请选择支付方式"):this.orderByCart():Object(i.Toast)("请添加地址")}}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("mt-header",{staticClass:"header",attrs:{fixed:"",title:"确认订单"}},[s("a",{attrs:{slot:"left",href:"javascript:history.go(-1);"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),s("div",{staticClass:"buyNow container"},[s("router-link",{attrs:{to:"/detailAddress"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.haveAddress,expression:"haveAddress"}],staticClass:"address flex-between flex-align-center",attrs:{id:t.address.aId}},[s("p",{staticClass:"receiver_name"},[t._v(t._s(t.address.aName))]),t._v(" "),s("div",{staticClass:"address-detail"},[s("p",[t._v(t._s(t.address.aTel))]),t._v(" "),s("p",{staticClass:"text-ellipsis"},[t._v(t._s(t.address.aProvice)+t._s(t.address.aCity)+t._s(t.address.aArea)+t._s(t.address.aAddress))])]),t._v(" "),s("i",{staticClass:"icon icon-go"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noAddress,expression:"noAddress"}],staticClass:"address flex-between flex-align-center"},[s("div",[t._v("\n          添加默认地址\n        ")]),t._v(" "),s("i",{staticClass:"icon icon-go"})])]),t._v(" "),t._l(t.orderList,function(e,a){return s("div",{key:a,staticClass:"gift-detail flex-align-center"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.pImage,alt:""}})]),t._v(" "),s("div",{staticClass:"gift-desc"},[s("p",{staticClass:"title text-ellipsis"},[t._v(t._s(e.pName))]),t._v(" "),s("span",[t._v(t._s(e.desc))]),t._v(" "),s("div",{staticClass:"flex-align-center flex-between"},[s("p",[t._v("×"+t._s(e.num))]),t._v(" "),s("p",{staticClass:"price"},[t._v("￥"+t._s(e.pPrice))])])])])}),t._v(" "),s("div",{staticClass:"gift-list flex"},[s("p",[t._v("支付方式")]),t._v(" "),s("div",{staticClass:"item-input flex-between flex-align-center"},[s("input",{attrs:{type:"text",id:t.pay_channel,readonly:"",onfocus:"this.blur()"},domProps:{value:t.payment}}),t._v(" "),s("i",{staticClass:"icon icon-go"})])])],2),t._v(" "),s("footer",[s("div",{staticClass:"footer"},[s("div",{staticClass:"footer-price"},[s("p",[t._v("应支付：")]),t._v(" "),s("p",[t._v(t._s(t.account)+"元")])]),t._v(" "),s("div",{staticClass:"button",on:{click:t.gotoPay}},[t._v("\n        去支付\n      ")])])])],1)},staticRenderFns:[]};var n=s("VU/8")(r,d,!1,function(t){s("YbCF")},"data-v-471a61aa",null);e.default=n.exports}});