webpackJsonp([29],{Mo5M:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Au9i"),i=s("95YI"),o=s.n(i),r=s("gwNS"),n={data:function(){return{title:"",info:{aName:"",aTel:"",addressArea:[],aAddress:"",aStatus:0},popupVisible:!1,select:{province:"",city:"",area:""},z_tel:/^1(3|4|5|6|7|8|9)\d{9}$/,uId:localStorage.getItem("uId")}},components:{VDistpicker:o.a},created:function(){"add"==this.$route.params.way?this.title="添加收货地址":(this.title="编辑收货地址",this.info=this.$route.params,this.info.addressArea=this.$route.params.addressArea.toString().replace(/,/g," "))},methods:{cityPop:function(){this.popupVisible=!0},setDefault:function(){return 0===this.info.aStatus||0==this.info.aStatus?this.info.aStatus=0:this.info.aStatus=1,this.info.aStatus},selectProvince:function(t){this.select.province=t.value,console.log(t)},selectCity:function(t){this.select.city=t.value,console.log(t)},selectArea:function(t){this.select.area=t.value;var e=[];for(var s in this.select)e.push(this.select[s]);void 0!==t.code&&(console.log(e.toString().replace(/,/g," ")),this.info.addressArea=e.toString().replace(/,/g," "),this.popupVisible=!1)},addAds:function(){var t=this;if(!this.info.aName)return Object(a.Toast)("请输入收货人姓名"),!1;if(this.info.aTel){if(!1===this.z_tel.test(this.info.aTel))return console.log(this.aTel),Object(a.Toast)("您输入的电话格式有误"),!1}else Object(a.Toast)("请输入收货人电话");if(0==this.info.addressArea.length)return Object(a.Toast)("请选择您的所在地区"),!1;this.info.aAddress||Object(a.Toast)("请填写您的详细地址"),this.setDefault()&&console.log(this.info.aStatus);var e=this.$qs.stringify({uId:this.uId,aName:this.info.aName,aTel:this.info.aTel,aProvice:this.info.addressArea.split(" ")[0],aCity:this.info.addressArea.split(" ")[1],aArea:this.info.addressArea.split(" ")[2],aAddress:this.info.aAddress,aStatus:this.info.aStatus});if("add"==this.$route.params.way)r.a.addAddress(e).then(function(e){Object(a.Toast)("添加成功"),t.$router.replace("/detailAddress")});else{var s=this.$qs.stringify({uId:this.uId,aId:this.$route.params.aId,aName:this.info.aName,aTel:this.info.aTel,aProvice:this.info.addressArea.split(" ")[0],aCity:this.info.addressArea.split(" ")[1],aArea:this.info.addressArea.split(" ")[2],aAddress:this.info.aAddress,aStatus:this.info.aStatus});r.a.editAddress(s).then(function(e){Object(a.Toast)("修改成功"),t.$router.replace("/detailAddress")})}}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("mt-header",{attrs:{fixed:"",title:t.title}},[s("a",{attrs:{slot:"left",href:"javascript:history.go(-1);"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"adderssMange"},[s("div",{staticClass:"form"},[s("div",{staticClass:"info_list"},[s("span",{staticClass:"info_title"},[t._v("收 货 人")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.aName,expression:"info.aName"}],staticClass:"ad_name",attrs:{type:"text",name:"s_consignee",placeholder:"请输入收货人姓名",required:""},domProps:{value:t.info.aName},on:{input:function(e){e.target.composing||t.$set(t.info,"aName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info_list"},[s("span",{staticClass:"info_title"},[t._v("联系电话")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.aTel,expression:"info.aTel"}],staticClass:"ad_tel",attrs:{type:"number",name:"s_phone",placeholder:"请输入手机号",required:""},domProps:{value:t.info.aTel},on:{input:function(e){e.target.composing||t.$set(t.info,"aTel",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info_list",on:{click:t.cityPop}},[s("span",{staticClass:"info_title"},[t._v("选择地区")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.addressArea,expression:"info.addressArea"}],staticClass:"ad_addr",attrs:{type:"text",name:"s_addr",placeholder:"请选择地区信息",readonly:"",required:""},domProps:{value:t.info.addressArea},on:{input:function(e){e.target.composing||t.$set(t.info,"addressArea",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info_list"},[s("span",{staticClass:"info_title"},[t._v("详细地址")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.aAddress,expression:"info.aAddress"}],staticClass:"ad_add_d",attrs:{type:"text",name:"s_address",placeholder:"请输入详细地址",required:""},domProps:{value:t.info.aAddress},on:{input:function(e){e.target.composing||t.$set(t.info,"aAddress",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"setDefAds"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.info.aStatus,expression:"info.aStatus"}],attrs:{type:"checkbox",id:"setDefAds"},domProps:{checked:Array.isArray(t.info.aStatus)?t._i(t.info.aStatus,null)>-1:t.info.aStatus},on:{click:t.setDefault,change:function(e){var s=t.info.aStatus,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.info,"aStatus",s.concat([null])):o>-1&&t.$set(t.info,"aStatus",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.info,"aStatus",i)}}}),t._v(" "),s("label",{attrs:{for:"setDefAds"}},[t._v(" 设置为默认地址")])]),t._v(" "),s("mt-button",{staticClass:"releaseBtn",attrs:{type:"default"},on:{click:t.addAds}},[t._v("确认")])],1)])]),t._v(" "),s("mt-popup",{staticClass:"mint-popup-4",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("v-distpicker",{staticClass:"citypop",attrs:{type:"mobile",wrapper:"address-wrapper",province:t.select.province,city:t.select.city,area:t.select.area},on:{province:t.selectProvince,city:t.selectCity,area:t.selectArea}})],1)],1)},staticRenderFns:[]};var d=s("VU/8")(n,l,!1,function(t){s("e1Pi")},"data-v-78fb51cd",null);e.default=d.exports},e1Pi:function(t,e){}});