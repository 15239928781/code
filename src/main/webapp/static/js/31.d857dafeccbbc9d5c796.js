webpackJsonp([31],{EDX8:function(t,e){},oCvM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("gwNS"),o=s("zfN/"),i=s("Au9i"),n={data:function(){return{wrapperHeight:0,allLoaded:!1,bottomStatus:"",page:1,collectList:[],startX:0,endX:0,isEmpty:!0,uId:localStorage.getItem("uId")}},components:{nopage:o.a},created:function(){this.getCollect(1)},mounted:function(){this.wrapperHeight=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top},methods:{getCollect:function(t){var e=this,s=this.$qs.stringify({uId:this.uId,start:t,length:10});a.a.CollectionList(s).then(function(s){if(0==s.data.length)e.isEmpty=!1,Object(i.Toast)({message:"没有了",position:"bottom",duration:2e3});else if(console.log(s),1==t)e.collectList=s.data.data,e.page=2;else{for(var a=0;a<s.data.data.length;a++)e.collectList.push(s.data.data[a]);e.page++}})},loadBottom:function(){},handleBottomChange:function(t){console.log(t),this.bottomStatus=t},touchStart:function(t){this.startX=t.touches[0].clientX},touchEnd:function(t){var e=t.currentTarget.parentElement;this.endX=t.changedTouches[0].clientX,0==e.dataset.type&&this.startX-this.endX>30&&(this.restSlide(),e.dataset.type=1),1==e.dataset.type&&this.startX-this.endX<-30&&(this.restSlide(),e.dataset.type=0),this.startX=0,this.endX=0},checkSlide:function(){for(var t=document.querySelectorAll(".list-item"),e=0;e<t.length;e++)if(1==t[e].dataset.type)return!0;return!1},restSlide:function(){for(var t=document.querySelectorAll(".list-item"),e=0;e<t.length;e++)t[e].dataset.type=0},deleteItem:function(t){var e=this,s=t.currentTarget.dataset.index,o=t.currentTarget.dataset.id;this.restSlide();var i=this.$qs.stringify({uId:this.uId,pId:o});a.a.cancleStatus(i).then(function(t){console.log(t),e.collectList.splice(s,1),setTimeout(e.$router.go(0),3e3)})},button:function(){this.$router.push("/")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("mt-header",{staticClass:"header",attrs:{fixed:"",title:"收藏夹"}},[s("a",{attrs:{slot:"left",href:"javascript:history.go(-1);"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),s("div",{staticClass:"collect container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],staticClass:"empty-img"},[s("nopage",{attrs:{describe:"还没浏览过商品哦"}}),t._v(" "),s("button",{staticClass:"button",on:{click:t.button}},[t._v("去逛逛")])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isEmpty,expression:"isEmpty"}],ref:"wrapper",staticClass:"page-loadmore-wrapper",style:{height:t.wrapperHeight+"px"}},[s("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom},on:{"bottom-status-change":t.handleBottomChange}},[s("ul",t._l(t.collectList,function(e,a){return s("li",{key:a,staticClass:"list-item",attrs:{"data-type":"0"}},[s("router-link",{attrs:{to:{path:"/detail/"+e.pId}}},[s("div",{staticClass:"list-box flex",on:{"!touchstart":function(e){return t.touchStart(e)},"!touchend":function(e){return t.touchEnd(e)}}},[s("div",{staticClass:"collectImg"},[s("img",{attrs:{src:e.pImage,alt:""}})]),t._v(" "),s("div",{staticClass:"collectDesc flex"},[s("div",{staticClass:"collect-top"},[s("p",{staticClass:"text-ellipsis"},[t._v(t._s(e.pName))]),t._v(" "),s("p",{staticClass:"item-info"},[s("span",{staticClass:"item-level"},[t._v("中级")]),t._v(" "),s("span",{staticClass:"dot"},[t._v("·")]),t._v(" "),s("span",{staticClass:"item-number"},[s("i",{staticClass:"iconfont icon-people"}),t._v("\n                        "+t._s(e.pNum?e.pNum:0)+"\n                      ")])])])])])]),t._v(" "),s("div",{staticClass:"delete",attrs:{"data-id":e.pId,"data-index":a},on:{click:t.deleteItem}},[t._v("删除")])],1)}),0),t._v(" "),s("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.bottomStatus,expression:"bottomStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.bottomStatus}},[t._v("↑")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[s("mt-spinner",{attrs:{type:"snake"}})],1)])])],1)])],1)},staticRenderFns:[]};var r=s("VU/8")(n,l,!1,function(t){s("EDX8")},"data-v-66c300a5",null);e.default=r.exports}});