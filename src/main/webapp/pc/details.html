<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta property="qc:admins" content="77103107776157736375"/>
    <meta property="wb:webmaster" content="c4f857219bfae3cb"/>
    <meta http-equiv="Access-Control-Allow-Origin" content="*"/>
    <meta http-equiv="Cache-Control" content="no-transform "/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="icon" href="static2/images/logo-icon.png">
    <link rel="stylesheet" href="static2/css/moco.min.css" type="text/css"/>
    <link rel="stylesheet" href="static2/css/swiper-3.4.2.min.css">
    <link rel="stylesheet" href="static2/css/common.css">
    <link rel="stylesheet" href="static2/css/header.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="static2/css/0938fa5423c94e9f9c9af663e26b4c3d.css" type="text/css"/>
    <style type="text/css">
        .chapter-ul ul li {
            padding: 12px 0;
            border-top: 1px solid rgba(28, 31, 33, .1);
            line-height: 24px;
        }

        .chapter-ul ul li .watch-free {
            float: right;
            padding: 0 16px;
            font-size: 12px;
            background: rgba(242, 13, 13, .1);
            border-radius: 12px;
            color: #f20d0d;
            font-weight: 700;
        }

        .chapter-ul ul li .watch-free:hover {
            background: red;
            color: #fff;
            cursor: pointer;
        }

        .section {
            font-size: 21px;
            color: #545C63
        }

        .card-sets:hover {
            cursor: pointer;
        }

        .user-card-box:hover {
            cursor: pointer;
        }

        .play-entrance {
            display: inline-block;
            position: relative;
            float: left;
            width: 296px;
            height: 100%;
        }

        .play-icon-text {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center
        }
    </style>
    <link merge="false" rel="stylesheet" type='text/css' href="static2/css/203-less.css"/>
    <link rel="stylesheet" href="static2/css/d53ac9fdc5de492c92bc1a710c7deea8.css" type="text/css"/>
</head>

<body>

<!--顶部导航栏-->
<div id="header">
    <div class="page-container clearfix" id="nav" style="background-color: #fff !important;">
        <div id="logo" class="logo">
            <a href="index2.html" title="首页">
                <img style="height: 48px;margin-top: 12px" title="白又白" src="static2/images/logo.png">
            </a>
        </div>
        <button type="button" class="navbar-toggle visible-xs-block js-show-menu">
            <i class="icon-menu"></i>
        </button>
        <div id="login-area">
            <ul class="header-unlogin clearfix">
                <li class="app-download  user-card-box" id="js-app-load">
                    <a target="_blank" style="width:60px;">关注公众号</a>
                    <div class="g-user-card">
                        <img src="static2/images/code.jpg">
                    </div>
                </li>
                <li class="header-signin" id="login">
                    <a href="login.html" id="js-signin-btn">登录</a>

                </li>
                <li class="set_btn user-card-box" id="header-user-card" style="display: none;">
                    <a id="header-avator" class="user-card-item js-header-avator" action-type="my_menu" target="_self">
                        <img style="width: 40px;height: 40px" width="40" height="40" id="headerImg"
                             src="//img3.mukewang.com/582c2f900001f84406400640-100-100.jpg">
                        <i class="myspace_remind" style="display: none;"></i>
                        <span style="display: none;">动态提醒</span>
                    </a>
                    <div class="g-user-card">
                        <div class="card-inner">
                            <div class="card-top clearfix">
                                <a class="l"><img
                                        src="//img3.mukewang.com/582c2f900001f84406400640-100-100.jpg"
                                        alt="qq__49544366693" id="Imgsrc">
                                </a>
                                <div class="card-top-right-box l">
                                    <div>
                                        <span class="name text-ellipsis" id="uName">byb_49544366693</span>
                                    </div>
                                    <div class="meta">
                                        <!--<a href="/u/index/experience">经验<b id="js-user-mp">674</b></a>-->
                                        <!--<a href="/u/index/credit">积分<b id="js-user-credit">0</b></a>-->
                                        <span>积分<b id="js-user-credit">0</b></span>
                                        <span><b id="js-user-mp">普通会员</b></span>
                                    </div>
                                </div>
                            </div>
                            <div class="user-center-box">
                                <ul class="clearfix">
                                    <li class="l">
                                        <a href="myProduct.html">
                                            <span class="user-center-icon icon-tick">我的课程</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-sets clearfix"><a
                                    class="l" onclick="edit();">安全退出</a>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

<!--顶部背景图片-->
<div class="course-infos-top " style="background-image:url(static2/images/5b50858100011b9220000560.jpg)">
    <div class="info-wrap" id="details">
        <div class="title-box" id="pname"></div>
        <div class='hide'>
            <h1 class="l"> Vue2.5开发去哪儿网App 从零基础入门到实战项目</h1>
        </div>
    </div>
    <!--价格和立即购买-->
    <div class="fixed-wrap" style="bottom:-64px" id="productprice"></div>
</div>

<!--课程介绍-->
<div class='course-infos-t'>
    <div id='Anchor'></div>
    <div class="comp-tab-t js-comp-tab">
        <ul class='clearfix'>
            <li class="comp-tab-item-first comp-tab-item active ">
                <a href="#">课程介绍</a>
                <div class="borderLine"></div>
            </li>
        </ul>
    </div>

    <!--课程详情-->
    <div class="info-video clearfix" style="background-image: url(static2/images/5ac2dff100012c2809000500.jpg);">
        <div class="video-dark-box l clearfix" style="display: block">
            <!--视频播放按钮-->
            <!--<div class="js-video-btn videoBtn l" style="background-color: #00a0dc;">-->
            <!--<div id="playview">-->
            <!--<i class="sz-play js-enter-tryMedia"></i>-->
            <!--</div>-->
            <!--<p>观看视频111111111111111111111111111</p>-->
            <!--</div>-->

            <!--ppt-->
            <div class="play-entrance" id="playEntrance">
                <div class="play-icon-text" id="pptItem">
                    <!--<div id="pptItem1"-->
                    <!--style="margin: 6px;display: flex;flex-direction: row;justify-content: center;align-items: center">-->
                    <!--<img width="40" height="40" src="static2/images/logo-icon.png">-->
                    <!--<span style="color: white;margin-left: 6px;text-decoration:underline ">11111</span>-->
                    <!--</div>-->
                </div>
            </div>

            <!--课程介绍-->
            <div id="videoInfo" class="l">
                <div id="content">
                    <div class="con">
                        <div class='info-name'></div>
                        <div class='info-desc'></div>
                    </div>
                    <div class="line"></div>
                </div>
            </div>
        </div>
        <!--教师-->
        <div class="teacher-right-box r">
            <div class="teacher">
                <div class="whiteBorder"></div>
                <!--<a href="" target="_blank">-->
                <div class='headPortrait'>
                    <img src="" id="pic">
                </div>
                <div class='nickname' id="nickname"></div>
                <!--</a>-->
            </div>
        </div>
    </div>

    <!--视频播放-->
    <!--<div id="video-wrap" style="display: none;">-->
    <div id="video-wrap" style="display: none;">
        <div id="video-box">
            <div class="video-title">
                <h2>课程预览</h2>
                <div id="js-close-mediaview" class="close-mediaview imv2-close"></div>
            </div>
            <!-- <div id="try-video-container"></div> -->
            <ul class="video-list">
                <li class="active">
                    <video id="play" src="#"
                           controls="controls"
                           autoplay="autoplay"
                           width="100%"
                           height="100%"
                           poster="image/loading_wap.gif">
                    </video>
                </li>
            </ul>
        </div>
        <div class="next-mask" id="next-mask">
            <div class="next-content">
                <div class="wechat-box js-wechat-box">
                    <a href="javascript:void(0)"
                       class="moco-icon-close moco-modal-close wechat-close js-wechat-close"></a>
                    检测到您还没有关注白又白公众号，无法接收课程更新通知。请扫描二维码即可绑定
                    <div style="text-align:center">
                        <img width="100%" src=""></div>
                </div>
                <div id="next-media-content"></div>
                <a href="javascript:;" class="view-again js-view-again">
                    <i class="sz-replay"></i>重新观看
                </a>
            </div>
            <i class="helper"></i>
        </div>
    </div>
</div>
<div class="infolayout clearfix">
    <div class="appendtemplate">
        <!--ES_BEGIN-->
        <div class="introduce-content">
            <!--<div class="section0">
                <div class="wrap">
                    <div class="content-box clearfix" id="details">

                    </div>
                </div>
            </div>-->
            <div id="footer">
                <div class="waper">
                    <div class="footerwaper clearfix">
                        <div class="footer_intro l">
                            <div class="footer_link">
                                <ul>
                                    <li>
                                        <a target="_blank">网站首页</a>
                                    </li>
                                    <li>
                                        <a target="_blank">联系我们</a>
                                    </li>
                                    <li>
                                        <a target="_blank">帮助中心</a>
                                    </li>
                                    <li>
                                        <a target="_blank">意见反馈</a>
                                    </li>
                                    <li>
                                        <a target="_blank">友情链接</a>
                                    </li>
                                    <!-- <li><a href="http://www.imooc.com/about/us" target="_blank">关于我们</a></li> -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 公众号二维码模态框（Modal） -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="myModalLabel">公众号二维码</h4>
                        </div>
                        <div class="modal-body" style="text-align: center;">
                            <div>请扫描下方的二维码进行购买</div>
                            <img src="static2/images/code.jpg">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>
        </div>
    </div>
</div>

<!-- 静态储存区,全局变量 -->
<script src="static2/js/extern.js"></script>
<script src="static2/js/ssologin.js"></script>
<script type="text/javascript" src="static2/js/jquery-1.9.1.min.js"></script>
<!--<script type="text/javascript" src="static2/js/jquery.cookie.js"></script>-->
<script src="static2/js/bootstrap.min.js"></script>
<script type="text/javascript">
    // 获取个人信息
    $.ajax({
        type: "post",
        url: ctx + "/ssm/front/getUserByIdPC",
        data: {
            uId: uId,
            token: getToken()
        },
        success: function (d) {
            d = JSON.parse(d)
            if (d.data.length < 1){
                window.location.href = "login.html";
            }
            // console.log('---getUserById-----------------------------------------------')
            // console.log(d.data[0])
            if (d.status == 204) {
                window.location.href = "login.html";
            } else {
                $("#header-user-card").css("display", "block");
                $("#login").css("display", "none");
                $("#headerImg").attr("src", d.data[0].uImg);
                $("#Imgsrc").attr("src", d.data[0].uImg);
                $("#uName").text(d.data[0].uName)
                $("#js-user-credit").text(d.data[0].uIntegral)
                $("#js-user-mp").text(d.data[0].levelName)
            }
        },
        error: function (error) {
            window.location.href = "login.html";
        }
    })



    $(document).ready(function () {
        $.ajax({
            type: "get",
            url: ctx + "/ssm/front/getProductByPid?pId=" + getQueryString("pId") + "&uId=" + uId,
            success: function (d) {
                // console.log('---getUserById1111-----------------------------------------------')
                var d = JSON.parse(d)
                // console.log(d)
                // console.log(d.data.pIsgroup)
                // 将商品名称转化成数组的形式，并除去为空的item
                var goodsNameList = d.data.pIsgroup.split(',');

                var newGoodsNameList = []
                // console.log(goodsNameList)
                for (var p = 0; p < goodsNameList.length; p++) {
                    // console.log(goodsNameList[p])
                    if (goodsNameList[p]) {
                        newGoodsNameList.push(goodsNameList[p])
                    }
                }
                // console.log('---newGoodsNameList-----------------------------------------------')
                // console.log(newGoodsNameList)
                // console.log('---newGoodsNameList-----------------------------------------------')
                if (d.data.pIsfee) {
                    // console.log('收费商品')
                    document.getElementById('playEntrance').style.display = 'none'
                    document.getElementById('videoInfo').style.paddingLeft = '16px'

                } else {
                    // pValidity 0是video,1是ppt，2是pdf,3是实物商品
                    for (var pro = 0; pro < newGoodsNameList.length; pro++) {
                        if (d.data.pValidity === 0) {
                            // alert(newGoodsNameList[pro])
                            $("#pptItem").append(
                                `<a href="videoPlay.html?goodsName=${newGoodsNameList[pro]}&pId=${d.data.pId}"><div id="playview${pro}"
                            style="margin: 6px;display: flex;flex-direction: row;justify-content: center;align-items: center">
                                <img width="40" height="40" src="static2/images/play.png">
                                <span style="color: white;margin-left: 6px;text-decoration:underline ">${d.data.pName}</span>
                                </div></a>`
                            )
                        } else if (d.data.pValidity === 1 || d.data.pValidity === 2) {
                            $("#pptItem").append(
                                `<a href="pptPlay.html?goodsName=${newGoodsNameList[pro]}&pId=${d.data.pId}&pptClickNum=${pro}">
                                            <div id="pptItem1" style="margin: 6px;display: flex;flex-direction: row;justify-content: center;align-items: center">
                                <img width="40" height="40" src="static2/images/ppt.png">
                                <span style="color: white;margin-left: 6px;text-decoration:underline ">${d.data.pName}</span>
                                </div>
                                </a>`
                            )
                        } else if (d.data.pValidity === 3) {
                        } else {
                        }
                    }
                }

                // console.log('---getUserById-----------------------------------------------')
                $("title").text(d.data.pName)
                // $("#pic").attr("src",ctx+"/ssm/file/showPic?fileName="+d.data.teacher.tPic+"&uId=124");
                $("#pic").attr("src", d.data.teacher.tPic + "&uId=124");
                $("#nickname").text(d.data.teacher.tName)
                var productItems = d.data.productItems;
                $("#pname").append(`<h1>${d.data.pName}</h1>`)
                // $(".info-desc").html(d.data.teacher.tPosition)
                $(".info-desc").html(d.data.pDesc)

                $("#productprice").append(
                    // 只在未购买和已购买正常转状态显示
                    `<div class="con">
                         <div class="time-price clearfix">
                            <div class="no-discount clearfix l">
                                <div class="ori-price l">￥${d.data.pPrice}</div>
                            </div>
                         </div>
                         <div class='info-bar clearfix' style="margin-top: 2px">
                            <span>学习人数</span>
                            <span class="nodistance">${d.data.pNum}</span>
                            <i class="imv2-dot_samll"></i>
                            <span>综合评分</span>
                            <span class="nodistance">9.98分</span>
                         </div>
                         <div class="btns">
                            <a href="javascript:;" class="js-buy-trigger red-btn gobuy" data-cid="203" data-pay="0"
                                id="buy-trigger" data-toggle="modal" data-target="#myModal">立即购买</a>
                         </div>
                    </div>`
                )
                for (var i = 0; i < productItems.length; i++) {
                    $("#productItems").append(
                        `<li>
                             <i class="imv2-video"></i>
                             <span class="title_info js-watchTrigger">${productItems[i].iName}</span>
                             <span class="watch-free js-watchForFree" data-index="0"  onclick=player("${productItems[i].iPic}");>播放</span>
                             <input type="hidden" value="22787">
                        </li>`
                    )
                }
            }
        })
    })

    // 禁用视频右键保存功能
    $('#play').bind('contextmenu', function () {
        return false;
    });

    // 关闭视频播放
    window.document.getElementById('js-close-mediaview').onclick = function () {
        window.document.getElementById('video-wrap').style.display = 'none'
    }

    function player(iPic) {
        $.ajax({
            type: "post",
            url: ctx + "/ssm/front/player",
            async: true,
            data: {"fileName": iPic, "uId": uId},
            success: function (d) {
                // console.log(d)
                var d = JSON.parse(d)
                if (d.status == 204) {
                    alert(d.msg)
                } else if (d.status == 206) {
                    alert(d.msg)
                }
                else {
                    $("#video-wrap").css("display", "block")
                    $("#play").attr("src", d.data.result);
                }
            }
        });
        /* $("#play").attr("src",ctx+"/ssm/front/player?fileName="+iPic+"&uId="+uId);
         $("#video-wrap").css("display", "block")*/
    }

    $(".set_btn").hover(function () {

        $(this).addClass("set_btn user-card-box hover");
        $(this).siblings().removeClass('hover');

    }, function () {
        $(this).removeClass('hover');
    });

    $("#js-app-load").hover(function () {

        $(this).addClass("user-card-box hover");
        $(this).siblings().removeClass('hover');

    }, function () {
        $(this).removeClass('hover');
    });

    $("#buy-trigger").click(function () {

    })
</script>
</body>
</html>